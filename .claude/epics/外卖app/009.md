---
id: 009
epic: 外卖app
title: Vue3管理后台
status: pending
effort: XL (40小时)
dependencies: []
parallel: true
assignee: []
labels: [frontend, vue3, admin, management]
priority: high
created: 2025-12-31T13:44:17Z
updated: 2025-12-31T13:44:17Z
---

# 任务 009: Vue3管理后台

## 概述

开发基于Vue3 + TypeScript + Vite的现代化管理后台系统，集成Element Plus UI组件库，实现订单管理、商品管理、数据统计、用户管理和评价管理功能。支持WebSocket实时订单通知，提供声音提醒和CSV导出功能。与Flutter移动端并行开发，提高开发效率。

## 技术栈

- **框架**: Vue3 + TypeScript + Vite
- **UI组件**: Element Plus
- **状态管理**: Pinia
- **路由**: Vue Router
- **HTTP客户端**: Axios
- **数据可视化**: ECharts
- **实时通信**: WebSocket (订单通知)
- **构建工具**: Vite
- **代码规范**: ESLint + Prettier

## 详细任务

### 1. 项目初始化和基础架构 (4小时)

**项目搭建**
- 使用Vite创建Vue3 + TypeScript项目
- 配置ESLint、Prettier代码规范
- 配置路径别名(@/src)
- 配置环境变量(.env.development, .env.production)

**依赖安装**
```bash
npm install vue@latest vue-router@latest pinia@latest
npm install element-plus @element-plus/icons-vue
npm install axios echarts
npm install @typescript-eslint/parser @typescript-eslint/eslint-plugin
```

**Element Plus集成**
- 自动按需导入配置
- 主题定制(品牌色、字体)
- 暗黑模式支持(可选)
- 中英文国际化配置

**开发规范**
- 目录结构规范(src/views, src/components, src/api, src/stores)
- 命名规范(组件大驼峰、文件小写短横线)
- TypeScript类型定义规范

### 2. 状态管理和路由配置 (4小时)

**Pinia状态管理**
- 创建用户状态 store(user.ts)
- 创建订单通知状态 store(notification.ts)
- 持久化配置(pinia-plugin-persistedstate)

**Vue Router配置**
- 路由结构设计(登录、订单、商品、统计、用户、评价)
- 路由懒加载配置
- 路由守卫(登录验证、权限控制)
- 页面标题动态设置

**路由结构**
```
/login - 登录页
/ - 首页重定向到/order
/order - 订单管理
  /order/list - 订单列表
  /order/:id - 订单详情
/product - 商品管理
  /product/list - 商品列表
  /product/edit/:id - 编辑商品
  /product/category - 分类管理
/statistics - 数据统计
  /statistics/overview - 今日概览
  /statistics/trend - 趋势分析
/user - 用户管理
/review - 评价管理
```

### 3. 认证和权限系统 (4小时)

**管理员登录**
- 登录表单(username + password)
- 表单验证规则
- 调用后端登录API(/api/admin/login)
- JWT Token存储(localStorage)
- 自动登录(Token持久化)

**Axios拦截器**
- 请求拦截器(JWT Token注入)
- 响应拦截器(统一错误处理)
- Token过期自动跳转登录
- Loading状态管理
- 错误提示统一处理

**权限控制**
- 路由守卫(未登录重定向)
- 按钮级权限控制(v-if指令)
- 菜单权限动态渲染
- 退出登录功能

### 4. 布局框架和UI组件 (4小时)

**主布局设计**
- 侧边栏导航菜单
- 顶部栏(面包屑、用户信息、退出)
- 内容区域(多标签页支持)
- 响应式布局适配

**通用组件开发**
- 面包屑导航组件
- 分页组件
- 搜索表单组件
- 表格操作列组件
- 状态标签组件(订单状态)
- 图片预览组件
- 导出按钮组件

**UI优化**
- 页面过渡动画
- Loading骨架屏
- 空状态提示
- 错误边界处理

### 5. 订单管理模块 (8小时)

**订单列表页面**
- 订单列表表格(订单号、用户、金额、状态、时间)
- 高级筛选(状态、时间范围、订单号、手机号)
- 分页功能
- 状态标签展示(待接单、制作中、配送中、已完成)
- 批量操作(批量接单、批量导出)

**订单详情页面**
- 订单基本信息展示
- 订单商品列表
- 用户信息展示
- 配送/自取信息展示
- 订单时间线展示
- 订单状态更新操作
- 订单备注功能

**订单状态更新**
- 状态更新按钮
- 状态流转限制(待接单 → 制作中 → 配送中 → 已完成)
- 取消订单功能(管理员操作)
- 状态更新后调用API

**声音通知**
- WebSocket连接管理
- 新订单推送监听
- 浏览器声音提示(Audio API)
- 桌面通知(Notification API)
- 未读订单计数

**CSV导出功能**
- 导出当前筛选结果
- 导出字段定制(订单号、用户、商品、金额、状态、时间)
- CSV格式化处理(UTF-8 BOM)
- 文件下载触发

### 6. 商品管理模块 (6小时)

**商品列表页面**
- 商品列表表格(图片、名称、分类、价格、库存、销量、状态)
- 分类筛选
- 搜索功能(商品名称)
- 分页功能
- 快速编辑(上下架、库存调整)
- 批量操作(批量上下架)

**商品编辑页面**
- 商品基本信息表单
- 分类选择(下拉框)
- 本地图片路径输入(/static/images/xxx.png)
- 图片预览组件
- 价格、库存输入
- 商品描述富文本编辑器(可选)
- 表单验证规则
- 保存/取消操作

**分类管理页面**
- 分类列表表格(名称、排序、商品数量)
- 新增/编辑分类
- 分类排序功能
- 删除分类(商品数=0时)
- 树形结构展示(可选多级分类)

**库存管理**
- 库存预警提示(库存<10)
- 批量调整库存
- 库存变动日志(可选)

### 7. 数据统计模块 (5小时)

**今日概览卡片**
- 今日订单数
- 今日营业额
- 今日新增用户
- 待处理订单数
- 数据对比(同比昨日)

**ECharts趋势图**
- 折线图：近7日订单量趋势
- 柱状图：近7日营业额趋势
- 饼图：订单状态分布
- 折线图：用户增长趋势
- 图表交互(缩放、 tooltip)
- 响应式适配

**热销商品排行**
- Top10热销商品列表
- 商品销量、销售额展示
- 商品缩略图
- 趋势图标(上升/下降)

**数据刷新**
- 自动刷新(5分钟)
- 手动刷新按钮
- Loading状态
- 缓存策略

### 8. 用户管理模块 (3小时)

**用户列表页面**
- 用户列表表格(头像、昵称、手机号、注册时间、订单数、消费金额)
- 搜索功能(手机号、昵称)
- 分页功能
- 用户详情查看

**用户详情页面**
- 用户基本信息
- 订单历史列表
- 消费统计
- 评价历史
- 用户标签(可选)

### 9. 评价管理模块 (3小时)

**评价列表页面**
- 评价列表表格(用户、商品、星级、内容、图片、时间、状态)
- 星级筛选
- 搜索功能(用户名、商品名)
- 分页功能
- 评价状态(显示/隐藏)

**评价详情**
- 评价内容展示
- 图片预览
- 商品信息跳转
- 用户信息展示

**评价操作**
- 回复评价功能
- 删除评价功能
- 批量隐藏/显示

### 10. WebSocket实时订单通知 (3小时)

**WebSocket连接**
- 连接管理(断线重连)
- 心跳保活机制
- 连接状态显示

**消息处理**
- 新订单消息监听
- 消息解析和验证
- 未读消息队列

**通知提醒**
- 浏览器声音提示
- 桌面通知(Notification API)
- 未读订单角标
- 消息记录面板

### 11. 测试和优化 (4小时)

**功能测试**
- 所有页面功能测试
- 表单验证测试
- API调用测试
- 错误处理测试

**兼容性测试**
- Chrome浏览器测试
- Firefox浏览器测试
- Safari浏览器测试
- Edge浏览器测试

**性能优化**
- 路由懒加载优化
- 组件按需导入
- 图片懒加载
- 接口请求防抖节流
- 大数据列表虚拟滚动(可选)

**代码优化**
- TypeScript类型完善
- 组件抽离复用
- 代码注释完善
- Git提交规范

## 验收标准

### 功能完整性
- [ ] 管理员可以正常登录和退出
- [ ] 订单列表正常展示，支持筛选、分页、状态更新
- [ ] 新订单有声音和桌面通知
- [ ] 订单可以导出CSV文件
- [ ] 商品列表正常展示，支持新增、编辑、上下架
- [ ] 分类管理功能正常
- [ ] 数据统计页面展示今日概览和趋势图
- [ ] 用户和评价管理功能正常
- [ ] WebSocket实时订单通知正常工作

### 性能标准
- [ ] 页面首次加载时间 < 3秒
- [ ] 表格列表渲染(100条数据) < 500ms
- [ ] 路由切换动画流畅
- [ ] WebSocket连接稳定，断线自动重连

### 代码质量
- [ ] TypeScript类型定义完整
- [ ] 组件代码复用率 ≥ 30%
- [ ] ESLint检查无错误
- [ ] 代码注释覆盖率 ≥ 20%

### 兼容性
- [ ] Chrome浏览器(最新版)完全兼容
- [ ] Firefox浏览器(最新版)完全兼容
- [ ] Safari浏览器(最新版)完全兼容
- [ ] Edge浏览器(最新版)完全兼容

## 依赖关系

**前置依赖**
- 无(可与Flutter移动端并行开发)

**并行任务**
- 任务006 (Flutter基础框架) - 可并行开发

**后续依赖**
- 任务010 (测试和部署) - 依赖此任务完成

## 风险和缓解

**技术风险**
- **风险**: Element Plus组件定制困难
- **缓解**: 参考官方文档，使用CSS覆盖样式

**集成风险**
- **风险**: 后端API接口未就绪
- **缓解**: 使用Mock数据先行开发前端功能

**性能风险**
- **风险**: 大数据量表格性能问题
- **缓解**: 使用虚拟滚动技术，分页加载

## 预期成果

1. **可运行的管理后台系统**: 完整的Vue3管理后台应用
2. **源代码**: 完整的TypeScript源码
3. **构建产物**: 可部署的静态文件(dist目录)
4. **技术文档**: 项目README、组件使用文档
5. **部署说明**: 生产环境部署指南

## 时间分配

- 项目初始化和基础架构: 4小时
- 状态管理和路由配置: 4小时
- 认证和权限系统: 4小时
- 布局框架和UI组件: 4小时
- 订单管理模块: 8小时
- 商品管理模块: 6小时
- 数据统计模块: 5小时
- 用户管理模块: 3小时
- 评价管理模块: 3小时
- WebSocket实时订单通知: 3小时
- 测试和优化: 4小时

**总计**: 40小时 (5个工作日)
