---
id: 13
title: 双平台测试和发布准备
status: pending
priority: high
labels: [flutter, ios, android, testing, release]
assigned:
estimate: 24h
dependencies: [11, 12]
---

# 任务013: 双平台测试和发布准备

## 目标
在iOS和Android平台上进行完整的应用测试，并准备两个应用商店的发布材料，满足App Store和Google Play的发布要求。

## 背景说明
任务011和012已完成iOS和Android平台的配置构建，现在需要进行双平台测试验证，并准备应用商店发布所需的所有材料和元数据。

## 详细任务

### 1. 双平台功能测试 (8h)

#### iOS测试 (4h)
- [ ] 在iOS真机（或多种Simulator）上测试
  - iPhone 15 Pro (最新)
  - iPhone 12 (中等设备)
  - iPhone SE (低端设备)
- [ ] 测试所有用户流程
  - 新用户注册登录
  - 浏览商品并添加到购物车
  - 完整下单流程（外卖/自取）
  - 订单状态跟踪
  - 订单评价
  - 个人中心功能
- [ ] 测试iOS特定场景
  - 从后台返回App（状态恢复）
  - 接收系统通知
  - 权限请求流程
  - 深色模式切换
- [ ] 测试不同iOS版本
  - iOS 17（最新）
  - iOS 15（最低支持）

#### Android测试 (4h)
- [ ] 在Android真机（或多种Emulator）上测试
  - Pixel 8 Pro (最新Android 14)
  - Samsung Galaxy S23 (Android 13)
  - 小米/华为设备 (Android 11-12)
- [ ] 测试所有用户流程（同iOS）
- [ ] 测试Android特定场景
  - 返回键导航
  - 多任务切换
  - 通知权限请求（Android 13+）
  - Material Design组件
  - 不同屏幕尺寸适配
- [ ] 测试不同Android版本
  - Android 14（最新）
  - Android 11（最低支持）

### 2. 性能和兼容性测试 (6h)

#### 性能测试 (3h)
- [ ] iOS性能指标
  - App冷启动时间 < 3秒
  - 页面切换流畅度（60fps）
  - 内存占用 < 150MB
  - CPU使用率正常
  - 电池消耗测试
- [ ] Android性能指标
  - App冷启动时间 < 3秒
  - 页面切换流畅度（60fps）
  - 内存占用 < 200MB
  - APK大小 < 50MB
  - 电池消耗测试
- [ ] 使用Flutter DevTools进行性能分析

#### 兼容性测试 (3h)
- [ ] 不同屏幕尺寸适配
  - iPhone SE (小屏)
  - iPhone 15 Pro Max (大屏)
  - iPad (平板)
  - Android小屏/大屏/平板
- [ ] 横竖屏切换测试
- [ ] 不同分辨率适配
- [ ] 无障碍功能测试（可选）

### 3. Bug修复和优化 (6h)
- [ ] 整理测试发现的Bug列表
- [ ] 按优先级修复Bug
  - P0: 阻塞性Bug（崩溃、无法使用）
  - P1: 严重Bug（功能异常）
  - P2: 一般Bug（体验问题）
- [ ] iOS平台Bug修复
- [ ] Android平台Bug修复
- [ ] 跨平台统一问题修复
- [ ] 性能优化
- [ ] UI/UX细节优化
- [ ] 回归测试验证修复

### 4. App Store发布准备 (2h)

#### iOS元数据准备
- [ ] 准备应用名称和副标题
  - 名称：餐厅外卖配送
  - 副标题：美食配送，快速送达
- [ ] 准备应用描述（简体中文）
  - 功能介绍
  - 核心特性
  - 使用说明
- [ ] 准备应用截图（必需）
  - iPhone 6.7" Display: 3张
  - iPhone 6.5" Display: 3张
  - iPhone 5.5" Display: 3张
  - iPad Pro 12.9" Display: 3张
- [ ] 准备应用关键词
- [ ] 准备支持URL（技术支持、隐私政策）
- [ ] 准备分类：美食 / 生活方式
- [ ] 准备内容评级

#### iOS合规材料
- [ ] 隐私政策链接
- [ ] EULA（最终用户许可协议）
- [ ] 导出合规文档（如果需要）
- [ ] 税务和银行信息

### 5. Google Play发布准备 (2h)

#### Android元数据准备
- [ ] 准备应用名称
  - 名称：餐厅外卖配送
  - 简短描述：50字以内
  - 完整描述：4000字以内
- [ ] 准备应用截图（必需）
  - 手机截图（主屏幕）：至少2张
  - 手机截图（内购）：至少2张
  - 平板截图：可选
- [ ] 准备应用图标（512x512）
- [ ] 准备功能图形（1024x500）
- [ ] 准备应用宣传视频（可选）

#### Android合规材料
- [ ] 隐私政策URL
- [ ] 内容评级问卷
- [ ] 应用访问权限说明
- [ ] 目标受众设置
- [ ] 应用类别：美食 / 生活

### 6. 构建Release版本 (2h)
- [ ] iOS Release构建
  ```bash
  flutter build ios --release
  ```
  - 或使用Xcode Archive
- [ ] Android Release构建
  ```bash
  flutter build apk --release
  flutter build appbundle --release
  ```
- [ ] 验证Release版本
  - 功能完整性
  - 性能指标
  - 无明显Bug
- [ ] 版本号管理
  - iOS: 版本号1.0.0 (Build 1)
  - Android: versionCode 1, versionName "1.0.0"

### 7. 发布检查清单 (2h)
- [ ] 代码审查完成
- [ ] 所有P0/P1 Bug已修复
- [ ] 测试覆盖率达标
- [ ] 性能指标达标
- [ ] 应用商店材料准备完成
- [ ] 合规文档齐全
- [ ] 服务器环境就绪
- [ ] 埋点和统计配置完成
- [ ] 崩溃监控配置完成

## 验收标准

### 必须满足
- [ ] ✅ iOS和Android平台所有功能测试通过
- [ ] ✅ 无P0/P1级别Bug
- [ ] ✅ 性能指标满足要求
- [ ] ✅ App Store发布材料齐全
- [ ] ✅ Google Play发布材料齐全
- [ ] ✅ Release版本构建成功
- [ ] ✅ 双平台应用可以独立安装运行

### 质量指标
- [ ] iOS App启动时间 < 3秒
- [ ] Android App启动时间 < 3秒
- [ ] 崩溃率 < 1%
- [ ] 页面加载时间 < 2秒
- [ ] 内存占用在合理范围

## 技术细节

### 测试设备矩阵
**iOS:**
- iPhone 15 Pro (iOS 17)
- iPhone 12 (iOS 16)
- iPhone SE (iOS 15)

**Android:**
- Pixel 8 Pro (Android 14)
- Samsung Galaxy S23 (Android 13)
- 小米 Redmi (Android 11)

### 应用商店链接
**App Store:**
- 开发者账号：https://appstoreconnect.apple.com
- 测试Flight：TestFlight Beta测试

**Google Play:**
- 开发者控制台：https://play.google.com/console
- 内部测试：Closed Testing
- 开放测试：Open Testing

## 依赖关系
- 依赖任务011（iOS配置）
- 依赖任务012（Android配置）
- 依赖任务001-010（所有核心功能）

## 工作目录
```
/Volumes/545S/general final/flutter_app
```

## 注意事项
1. iOS真机测试需要Apple Developer账号
2. Google Play发布需要一次性$25注册费
3. 应用审核周期：iOS通常1-3天，Android通常1-7天
4. 首次发布建议先进行内部测试/Beta测试
5. 准备好应对应用商店的拒绝理由和修改要求

## 下一步
1. 提交App Store审核（任务014）
2. 提交Google Play审核（任务015）
3. 监控审核状态并根据反馈调整

## 参考资源
- [App Store审核指南](https://developer.apple.com/app-store/review/guidelines/)
- [Google Play政策中心](https://play.google.com/console/policies)
- [Flutter发布iOS App](https://docs.flutter.dev/deployment ios)
- [Flutter发布Android App](https://docs.flutter.dev/deployment/android)
