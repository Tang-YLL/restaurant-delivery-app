# 网络请求日志示例

## 📋 增强功能

### 1. 请求日志
```
┌───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
│ 🚀 网络请求开始
├───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
│ 📌 请求方法: POST
│ 🌐 请求URL: http://localhost:8000/api/orders
│ ⏰ 请求时间: 2026-01-02T14:51:37.123456
│ 📋 请求头: {
│   "Content-Type": "application/json",
│   "Accept": "application/json",
│   "Authorization": "Bearer eyJhbGciOi...QKX30"
│ }
│ 📦 请求体: {
│   "items": [
│     {
│       "product_id": 118,
│       "quantity": 1,
│       "price": 41.91
│     }
│   ],
│   "delivery_type": "delivery",
│   "delivery_address": "北京市北京市东城区asdfasdfasdf",
│   "pickup_name": "123123",
│   "pickup_phone": "13712341234"
│ }
└───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
```

### 2. 成功响应日志
```
┌───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
│ ✅ 响应成功
├───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
│ 📌 响应状态: 200 OK
│ ⏱️ 请求耗时: 234ms
│ 🌐 响应URL: http://localhost:8000/api/orders
│ 📦 响应体: {
│   "id": 44,
│   "order_number": "ORD20260102145137B969",
│   "user_id": 17,
│   "total_amount": 46.91,
│   "status": "pending",
│   "delivery_type": "delivery",
│   "order_items": [...]
│ }
└───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
```

### 3. 错误日志
```
┌───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
│ ❌ 请求失败
├───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
│ ⏱️ 请求耗时: 156ms
│ 🌐 请求URL: http://localhost:8000/api/orders/44
│ 📌 错误类型: DioExceptionType.badResponse
│ 💬 错误消息: HttpStatus 404
│ 🔴 状态码: 404 Not Found
│ 📄 错误详情: {
│   "detail": "1 validation error for OrderResponse..."
│ }
└───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
```

## ✨ 新增特性

### 1. 请求时间戳
- 每个请求都记录精确到毫秒的时间戳
- 方便追踪请求顺序和性能分析

### 2. 请求耗时统计
- 从请求发起到响应返回的总耗时
- 单位：毫秒（ms）
- 帮助识别慢接口

### 3. 格式化JSON输出
- 自动美化JSON，缩进2空格
- 超长数据自动截断并提示
- 更易读的日志格式

### 4. 状态码文本
- `200 OK`
- `404 Not Found`
- `500 Internal Server Error`
- 更直观的错误提示

### 5. 安全信息隐藏
- Token自动截断显示
- 只显示前后20个字符
- 防止敏感信息泄露

### 6. 错误详情增强
- 显示完整的错误类型
- 打印响应体（截断过长内容）
- 调试模式显示原始错误

### 7. Emoji图标
- 🚀 请求开始
- ✅ 成功响应
- ❌ 请求失败
- 📋 请求头
- 📦 数据体
- ⏱️ 耗时
- 🌐 URL
- 更多...

## 🔧 如何使用

1. **热重载应用**（按 `r`）或**热重启**（按 `R`）
2. 进行任何网络操作
3. 查看控制台输出的详细日志
4. 使用日志追踪问题和性能分析

## 📊 日志级别

- **Debug模式**: 显示所有详细日志
- **Release模式**: 只显示关键日志
- 错误日志会在任何模式下显示

